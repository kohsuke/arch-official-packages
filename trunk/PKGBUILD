# $Id$
# Maintainer: Vesa Kaihlavirta <vesa@archlinux.org>
pkgname=ghc
pkgver=6.12.1
pkgrel=1
pkgdesc="The Glasgow Haskell Compiler"
arch=(i686 x86_64)
url="http://www.haskell.org/ghc/"
license=("custom")
depends=(gmp perl)
makedepends=(ghc happy perl)
provides=(haskell-cabal)
replaces=("haskell-cabal<1.6.0.3")
backup=(usr/lib/ghc-6.12.1/package.conf)
install=(ghc.install)

source=("http://www.haskell.org/ghc/dist/$pkgver/$pkgname-$pkgver-src.tar.bz2" \
#    "http://www.haskell.org/ghc/dist/$pkgver/$pkgname-$pkgver-src-extralibs.tar.bz2"
     build.mk ghc.install)

build() {
  cd $srcdir/$pkgname-$pkgver

  cp ../../build.mk mk/build.mk

  ./configure --prefix=/usr 
  make -j1 || return 1
  make DESTDIR=$pkgdir install

  install -Dm644 LICENSE ${pkgdir}/usr/share/licenses/ghc/license
}
md5sums=('3a2b23f29013605f721ebdfc29de9c92'
         '31f83779da0e727dbe536ba671281e47'
         'd03bca6b591043c0fe996d72dd448919')
