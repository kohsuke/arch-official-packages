# $Id$
# Maintainer: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: Henrik Ronellenfitsch <searinox@web.de>

pkgname=amule
pkgver=2.2.6
pkgrel=3
pkgdesc="An eMule-like client for ed2k p2p network"
arch=('i686' 'x86_64')
url="http://www.amule.org"
license=('GPL')
depends=('wxgtk>=2.8.10.1' 'gd>=2.0.35' 'geoip' 'libupnp')
makedepends=('crypto++')
source=(http://downloads.sourceforge.net/project/${pkgname}/aMule/${pkgver}/aMule-${pkgver}.tar.bz2
        aMule-2.2.6-wxcasframe.patch)
md5sums=('530d9b48187e36f78fc21bb19e94326d'
         'ad3ddec634c0dcdde1d67de927a4d1ed')

build() {
  cd "${srcdir}/aMule-${pkgver}"
  patch -Np0 -i "${srcdir}/aMule-2.2.6-wxcasframe.patch" || return 1

  ./configure --prefix=/usr \
              --mandir=/usr/share/man \
              --enable-cas \
              --enable-wxcas \
              --enable-amule-daemon \
              --enable-amulecmd \
              --enable-amule-gui \
              --enable-alc \
              --enable-alcc \
              --enable-webserver \
              --disable-debug \
              --enable-optimize \
	      --enable-ccache \
	      --enable-geoip \
	      --enable-upnp

  make || return 1
  make DESTDIR=${pkgdir}/ install || return 1
}
