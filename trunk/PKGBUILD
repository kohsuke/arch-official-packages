# $Id$
# Contributor: Giovanni Scafora <linuxmania@gmail.com>
# Maintainer: Thomas BÃ¤chler <thomas@archlinux.org>

pkgname=microcode_ctl
# Version of the update tool
_toolver=1.17
# Version of the microcode image
_microcodever=20100826
pkgver=${_toolver}.${_microcodever}
pkgrel=1
pkgdesc="A companion to the IA32 microcode kernel driver"
arch=('i686' 'x86_64')
url="http://www.urbanmyth.org/microcode"
license=('GPL')
install=microcode.install
source=(http://www.urbanmyth.org/microcode/$pkgname-${_toolver}.tar.gz
        http://downloadmirror.intel.com/19299/eng/microcode-${_microcodever}.tgz
        microcode)
md5sums=('98a7f06acef8459c8ef2a1b0fb86a99e'
         '4f0922e5e0e97331fa63c085a74f80cf'
         '483c198659b8d716bdfbf05a57182394')

build() {
  cd $startdir/src/$pkgname-${_toolver}
  make all || return 1
  make DESTDIR=$startdir/pkg PREFIX=/usr RCFILETO=/etc/rc.d RCFILE=../microcode RCFILEFINAL=microcode MANDIR=/usr/share/man/man8 install || return 1
  install -D -m644 ../microcode-${_microcodever}.dat $startdir/pkg/etc/microcode.dat
}
