# $Id$
# Maintainer: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: Andrea Scarpino <bash.lnx@gmail.com>

pkgname=ivtv-utils
pkgver=1.3.0
pkgrel=1
pkgdesc="Userspace utilities for Hauppauge PVR cards"
arch=('i686' 'x86_64')
license=('GPL')
url="http://ivtvdriver.org"
source=(http://dl.ivtvdriver.org/ivtv/stable/$pkgname-$pkgver.tar.gz
        http://dl.ivtvdriver.org/ivtv/firmware/ivtv-firmware.tar.gz
        ivtv-utils-2.6.27.patch)
depends=('gcc-libs')
md5sums=('4781298cac4a3d8cfd5a8338895d102b'
         'b9a871f1c569025be9c48a77b3515faf'
         'af96eb672441e08816fab0d8eb25992e')
 
build() {
  cd "$srcdir/$pkgname-$pkgver"
 
  patch -Np1 -i ../ivtv-utils-2.6.27.patch
 
  make || return 1
  make DESTDIR="$pkgdir" install || return 1
 
  cd $startdir/src || return 1
  for file in `ls *.fw` v4l-cx2341x-init.mpg; do
    install -D -m644 $file "$pkgdir/lib/firmware/$file" || return 1
  done
}
