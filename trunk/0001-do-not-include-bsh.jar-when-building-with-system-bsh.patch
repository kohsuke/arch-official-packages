From 846010092e0a10c5423a26f5e78ea135d73b0103 Mon Sep 17 00:00:00 2001
From: David Tardon <dtardon@redhat.com>
Date: Mon, 23 May 2011 11:32:44 +0200
Subject: [PATCH] do not include bsh.jar when building with system bsh

---
 scripting/util/provider/beanshell/makefile.mk |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/scripting/util/provider/beanshell/makefile.mk b/scripting/util/provider/beanshell/makefile.mk
index 1f70fcb..a7c74f5 100755
--- a/scripting/util/provider/beanshell/makefile.mk
+++ b/scripting/util/provider/beanshell/makefile.mk
@@ -36,7 +36,9 @@ EXTENSIONNAME:=ScriptProviderForBeanShell
 EXTENSION_ZIPNAME:=script-provider-for-beanshell
 
 COMPONENT_JARFILES=$(EXTENSIONDIR)$/$(EXTENSIONNAME).jar
+.IF "$(SYSTEM_BSH)" != "YES"
 EXTENSION_PACKDEPS=$(SOLARBINDIR)$/bsh.jar
+.ENDIF
 
 .IF "$(ENABLE_SCRIPTING_BEANSHELL)" != "YES"
 @all:
@@ -47,12 +49,16 @@ EXTENSION_PACKDEPS=$(SOLARBINDIR)$/bsh.jar
 .INCLUDE : target.mk
 .INCLUDE : extension_post.mk
 
+.IF "$(SYSTEM_BSH)" != "YES"
+
 ALLTAR : $(EXTENSIONDIR)$/bsh.jar
 
 $(EXTENSIONDIR)$/bsh.jar : $(SOLARBINDIR)$/bsh.jar
     @@-$(MKDIRHIER) $(@:d)
     $(COMMAND_ECHO)$(COPY) $< $@
 
+.ENDIF
+
 .ELSE
 
 .INCLUDE : target.mk
-- 
1.7.5.1

