# $Id$
# Maintainer: Jan de Groot <jgc@archlinux.org>

pkgname=gnome-python-extras
pkgver=2.19.1
pkgrel=3
pkgdesc="Gnome Python interfaces for libraries not part of the core platform"
arch=(i686 x86_64)
license=('GPL' 'LGPL')
depends=('gnome-python>=2.22.1')
makedepends=('libgtkhtml' 'gtkspell' 'gdl' 'xulrunner>=1.9' 'libgksu' 'pkgconfig')
options=('!libtool')
source=(http://ftp.gnome.org/pub/gnome/sources/gnome-python-extras/2.19/gnome-python-extras-${pkgver}.tar.bz2
	gnome-python-extras-2.19.1-pkg-config.patch
	gnome-python-extras-2.19.1-xulrunner.patch)
url="http://www.daa.com.au/~james/pygtk/"
md5sums=('08896c63d71ce44d20fafbaf9c0edc78'
         'be993cc1e60c090c58db8317a1862213'
         '73657335e522f361d08ccc4899d279d6')

build() {
  cd ${startdir}/src/gnome-python-extras-${pkgver}
  patch -Np1 -i ${srcdir}/gnome-python-extras-2.19.1-pkg-config.patch || return 1
  patch -Np1 -i ${srcdir}/gnome-python-extras-2.19.1-xulrunner.patch || return 1
  sed -i "s|#include <gdl/gdl-icons.h>||" gdl/gdl.override || return 1
  ./configure --prefix=/usr --with-gtkmozembed=xulrunner || return 1
  make MOZILLA_HOME=/usr/lib/xulrunner-1.9 || return 1 
  make DESTDIR=${startdir}/pkg install || return 1
}
