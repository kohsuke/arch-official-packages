# $Id$
# Maintainer: Varun Acharya <varun@archlinux.org>

pkgname=miro
pkgver=1.2.3
pkgrel=1
pkgdesc="The free and open source internet TV platform"
arch=('i686' 'x86_64')
url="http://www.getmiro.com"
license=('GPL')
depends=('xine-lib' 'boost' 'gnome-python-extras' 'dbus-python' 'pyrex' \
         'nss' 'nspr' 'pygtk' 'gtk2' 'xulrunner>=1.8.1.11' 'sqlite3')
makedepends=('pkgconfig' 'qt3')
conflicts=('democracy')
replaces=('democracy')
provides=('democracy')
source=(http://ftp.osuosl.org/pub/pculture.org/miro/src/Miro-$pkgver.tar.gz
        missing-headers.patch)
md5sums=('a617324bee59ff83549ed44d9e96eed5'
         'b5482eac565a26817af0105b061a8ad5')

build() {
  cd $startdir/src/Miro-$pkgver/
  patch -p1 < $startdir/src/missing-headers.patch

  cd platform/gtk-x11
  python setup.py install --root=$startdir/pkg || return 1
}
