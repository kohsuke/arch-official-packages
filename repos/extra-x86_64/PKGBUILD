# $Id: PKGBUILD,v 1.11 2008/01/28 02:22:57 eric Exp $
# Maintainer: Simo Leone <simo@archlinux.org>
pkgname=ghc
pkgver=6.8.2
pkgrel=1.1
pkgdesc="A state-of-the-art, open source, compiler and interactive environment for Haskell."
arch=(i686 x86_64)
url="http://www.haskell.org/ghc/"
license=('custom')
depends=('gmp' 'perl' 'readline')
makedepends=('ghc' 'happy' 'freealut' 'freeglut' 'openal' 'libgl')
options=('!makeflags')
source=("http://www.haskell.org/ghc/dist/$pkgver/$pkgname-$pkgver-src.tar.bz2" \
    "http://www.haskell.org/ghc/dist/$pkgver/ghc-$pkgver-src-extralibs.tar.bz2")
md5sums=('43108417594be7eba0918c459e871e40' 'd199c50814188fb77355d41058b8613c')

build() {
  #since this is a compiler, it needs itself to compile
  #installer automatically bootstraps itself, so this actually compiles twice
  #In order to compile, you need ghc installed on your system
  cd $startdir/src/$pkgname-$pkgver
  ./configure --prefix=/usr
  make || return 1
  make DESTDIR=$startdir/pkg install

  # install license
  install -Dm644 LICENSE $startdir/pkg/usr/share/licenses/$pkgname/LICENSE
}
