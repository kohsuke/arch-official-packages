# $Id$
# Maintainer: Thomas Baechler <thomas@archlinux.org>

pkgname=iwlwifi-3945-ucode
pkgver=15.28.2.8
_compat_pkgver=15.28.1.8
pkgrel=1
pkgdesc="Intel wireless firmware for IPW3945 (iwlwifi driver)"
arch=(i686 x86_64)
url="http://intellinuxwireless.org/?p=iwlwifi"
license=('custom')
depends=()
source=(http://intellinuxwireless.org/iwlwifi/downloads/$pkgname-$pkgver.tgz
        http://intellinuxwireless.org/iwlwifi/downloads/$pkgname-${_compat_pkgver}.tgz)
md5sums=('d28cf1697da981c3f11f3420af6a40c8'
         'e793b43b2ef96f8b2605bfee03d78622')

build() {
  cd $startdir/src/$pkgname-${_compat_pkgver}
  # Install API version 1 firmware
  install -D -m 644 iwlwifi-3945-1.ucode $startdir/pkg/lib/firmware/iwlwifi-3945-1.ucode || return 1
  cd $startdir/src/$pkgname-$pkgver
  # Install API version 2 firmware
  install -D -m 644 iwlwifi-3945-2.ucode $startdir/pkg/lib/firmware/iwlwifi-3945-2.ucode || return 1
  # Install license
  install -D -m 644 LICENSE.iwlwifi-3945-ucode $startdir/pkg/usr/share/licenses/$pkgname/LICENSE || return 1
}
