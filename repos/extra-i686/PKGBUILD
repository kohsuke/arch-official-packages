# $Id$
# Maintainer: Eric BÃ©langer <eric@archlinux.org>

pkgname=gweled
pkgver=0.9
pkgrel=1
pkgdesc="A puzzle game similar to Bejeweled (aka Diamond Mine)"
arch=('i686' 'x86_64')
license=('GPL')
url="https://launchpad.net/gweled/"
depends=('librsvg' 'libmikmod')
makedepends=('intltool')
install=gweled.install
source=(http://launchpad.net/${pkgname}/trunk/${pkgver}/+download/${pkgname}-${pkgver}.tar.gz)
md5sums=('a3aeec75190710758bbd3c487b637112')
sha1sums=('70358e0557eaee370a9183e1ea34e95a09d57619')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
    --with-scores-user=root --with-scores-group=games
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install

# We generate these files on post-install to prevent score resets on upgrade
  rm -rf "${pkgdir}/var"
}
