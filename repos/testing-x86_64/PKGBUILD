#$Id$
# Maintainer: Eric Belanger <eric@archlinux.org>

pkgname=quodlibet
pkgver=2.0
pkgrel=3
pkgdesc="An audio player written in pygtk"
arch=('i686' 'x86_64')
license=('GPL2')
url="http://code.google.com/p/quodlibet/"
depends=('gstreamer0.10-python>=0.10.13-2' 'gstreamer0.10-base-plugins' 'gstreamer0.10-good-plugins' 'gstreamer0.10-ugly-plugins' 'mutagen' 'pygtk>=2.13.0-2')
makedepends=('intltool')
optdepends=('gstreamer0.10-ffmpeg: for ffmpeg (ASF/WMA) support ' 'gstreamer0.10-bad-plugins: for MPEG-4 (AAC) and Musepack support' 'dbus-python: for dbus support' 'libgpod: for ipod support')
options=('!makeflags')
source=(http://quodlibet.googlecode.com/files/${pkgname}-${pkgver}.tar.gz
        quodlibet-2.0-python26.patch)
md5sums=('4ec9703b3ef7ecf5c6ecf1b8ac7773f4'
         'd83e61e59216656ef5d84091dafa287f')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  patch -Np1 -i $srcdir/quodlibet-2.0-python26.patch
  ./setup.py build || return 1
  ./setup.py install --prefix=${pkgdir}/usr || return 1
  install -D -m644 quodlibet/images/exfalso.png ${pkgdir}/usr/share/pixmaps/exfalso.png || return 1
  install -D -m644 quodlibet/images/quodlibet.png ${pkgdir}/usr/share/pixmaps/quodlibet.png || return 1
}
