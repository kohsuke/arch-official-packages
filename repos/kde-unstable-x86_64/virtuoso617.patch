From: Vishesh Handa <me@vhanda.in>
Date: Sun, 28 Jul 2013 22:37:55 +0000
Subject: Repository: Support virtuoso version 6.1.6 and beyond
X-Git-Url: http://quickgit.kde.org/?p=nepomuk-core.git&a=commitdiff&h=0e01d5b59ab6ee566c4290b75d764c72e80c567d
---
Repository: Support virtuoso version 6.1.6 and beyond

Not version 7 though

BUG: 313834
---


--- a/services/storage/repository.cpp
+++ b/services/storage/repository.cpp
@@ -193,8 +193,10 @@
         return;
     }
 
-    if( !m_virtuosoVersion.startsWith("6.1.6") ) {
-        kError() << "NepomukStorage only works with virtuoso 6.1.6";
+    // We accept virtuoso version 6.1.6+ Nepomuk hasn't really been tested with 7
+    QRegExp regex("(6\.1\.[6789])");
+    if( !m_virtuosoVersion.contains(regex) ) {
+        kError() << "NepomukStorage only works with virtuoso 6.1.6 and beyond";
         return;
     }
 

